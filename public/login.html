<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ログイン - DXPRO SOLUTIONS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    }
    .form-input {
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
    }
    .form-input:focus {
      border-color: rgba(16, 185, 129, 0.6);
      box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-2px);
    }
    .form-input::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }
    .login-btn {
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #10b981 0%, #0ea5e9 100%);
    }
    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(16, 185, 129, 0.4);
    }
    .card-glass {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.36);
    }
    .info-item {
      transition: all 0.3s ease;
    }
    .info-item:hover {
      transform: translateX(5px);
    }
    /* 배경 비디오 스타일 */
    .background-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.3);
      z-index: -1;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .background-video.loaded {
      opacity: 1;
    }
    /* 비디오 대체 컨텐츠 (비디오 로딩 실패 시) */
    .video-fallback {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      z-index: -2;
    }
    /* 동적 배경 요소 */
    .dynamic-bg-element {
      position: fixed;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(16, 185, 129, 0.2) 0%, transparent 70%);
      z-index: -1;
      animation: float 15s infinite linear;
    }
    @keyframes float {
      0% {
        transform: translateY(0) translateX(0);
      }
      25% {
        transform: translateY(-20px) translateX(15px);
      }
      50% {
        transform: translateY(10px) translateX(25px);
      }
      75% {
        transform: translateY(20px) translateX(5px);
      }
      100% {
        transform: translateY(0) translateX(0);
      }
    }
    .video-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 10;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      transition: all 0.3s ease;
    }
    .video-control:hover {
      background: rgba(0, 0, 0, 0.7);
      transform: scale(1.1);
    }
    /* メールリンクスタイル */
    .email-link {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .email-link:hover {
      color: #10b981 !important;
      transform: translateY(-2px);
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 md:p-8">
  <!-- 배경 비디오 - 여러 소스 제공 -->
  <video id="bgVideo" autoplay muted loop class="background-video" preload="auto">
    <!-- 첫 번째 비디오 소스 (로컬) -->
    <source src="/videos/office-work.mp4" type="video/mp4">
    <!-- 두 번째 비디오 소스 (외부 - Pexels) -->
    <source src="https://static.videezy.com/system/resources/previews/000/042/289/or-free/office_people_01_1080p.mp4" type="video/mp4">
    <!-- 세 번째 비디오 소스 (외부 - Coverr) -->
    <source src="https://storage.coverr.co/videos/coverr-people-working-together-1562590038774?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6Ijg3NjdFMzIzRjlGQzEzN0E4QTAyIiwiaWF0IjoxNjI0NzY0MzgxfQ._RrLb4VjP1g6N-6vC7xU7n7xQ7X9ZJ8Z9X9ZJ8Z9X9" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="video-fallback"></div>

  <!-- 동적 배경 요소 생성 -->
  <div id="dynamicBackground"></div>

  <!-- 비디오 컨트롤 -->
  <div class="video-control" id="videoToggle">
    <i class="fas fa-pause"></i>
  </div>

  <div class="flex flex-col md:flex-row w-full max-w-6xl gap-8">
    <!-- 左側: 説明セクション -->
    <div class="card-glass rounded-2xl p-8 w-full md:w-2/5 text-white">
      <div class="flex items-center justify-center mb-8">
        <div class="w-20 h-20 rounded-full bg-gradient-to-r from-green-900/30 to-blue-900/30 flex items-center justify-center shadow-lg">
          <i class="fas fa-lock text-3xl text-white"></i>
        </div>
      </div>
      
      <h2 class="text-3xl font-bold text-center mb-6">採用管理システム</h2>
      <p class="text-center text-gray-300 mb-8">DXPRO SOLUTIONSの採用プロセスへようこそ</p>
      
      <div class="space-y-6 mb-8">
        <div class="info-item flex items-start gap-4 p-4 rounded-xl bg-white/5">
          <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0">
            <i class="fas fa-user-check text-green-400"></i>
          </div>
          <div>
            <h3 class="font-semibold text-green-300">応募状況の確認</h3>
            <p class="text-sm text-gray-300 mt-1">これまでに応募した職務の進捗状況を確認できます</p>
          </div>
        </div>
        
        <div class="info-item flex items-start gap-4 p-4 rounded-xl bg-white/5">
          <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0">
            <i class="fas fa-file-alt text-blue-400"></i>
          </div>
          <div>
            <h3 class="font-semibold text-blue-300">書類提出</h3>
            <p class="text-sm text-gray-300 mt-1">選考過程で必要な書類をアップロードできます</p>
          </div>
        </div>
        
        <div class="info-item flex items-start gap-4 p-4 rounded-xl bg-white/5">
          <div class="w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0">
            <i class="fas fa-calendar-day text-purple-400"></i>
          </div>
          <div>
            <h3 class="font-semibold text-purple-300">面接日程の調整</h3>
            <p class="text-sm text-gray-300 mt-1">面接の日程をオンラインで調整できます</p>
          </div>
        </div>
      </div>
      
      <div class="text-center">
        <p class="text-gray-400 text-sm">アカウントをお持ちでない方は</p>
        <a href="/register.html" class="inline-block mt-2 px-6 py-2 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors">
          新規登録はこちら
        </a>
      </div>
    </div>

    <!-- 右側: ログインフォーム -->
    <div class="card-glass rounded-2xl p-8 w-full md:w-3/5">
      <h2 class="text-3xl font-bold text-center mb-2 text-white">ログイン</h2>
      <p class="text-center text-gray-300 mb-8">採用管理ポータルにアクセス</p>

      <div id="alertBox" class="hidden mb-4 p-4 rounded-xl text-white font-medium transition-all duration-500 transform"></div>

      <form action="/login" method="post" class="space-y-5">
        <div>
          <label class="text-white font-medium mb-2 block">ログインID</label>
          <input type="text" name="username" placeholder="ログインIDを入力" required
            class="w-full p-4 rounded-xl form-input">
        </div>
        <div>
          <label class="text-white font-medium mb-2 block">パスワード</label>
          <input type="password" name="password" placeholder="パスワードを入力" required
            class="w-full p-4 rounded-xl form-input">
        </div>
        
        <div class="flex items-center justify-between">
          <label class="inline-flex items-center text-white">
            <input type="checkbox" class="form-checkbox h-5 w-5 text-green-500 bg-gray-800 border-gray-600 rounded">
            <span class="ml-2">ログイン状態を保持</span>
          </label>
          
          <a href="/forgot-password.html" class="text-green-400 hover:text-green-300 text-sm transition-colors">
            パスワードをお忘れですか？
          </a>
        </div>
        
        <button type="submit"
          class="w-full text-white font-semibold py-4 rounded-xl login-btn mt-6">
          ログイン
        </button>
      </form>

      <div class="mt-8 pt-6 border-t border-gray-700">
        <h3 class="text-white font-medium mb-4">ログインに関するお問い合わせ</h3>
        <p class="text-gray-400 text-sm mb-2">ログインに問題がある場合やアカウントの確認が必要な場合は、下記までご連絡ください。</p>
        <div class="flex items-center text-green-400">
          <i class="fas fa-envelope mr-2"></i>
          <span class="email-link" id="emailContact">recruit@dxpro-sol.com</span>
        </div>
      </div>
    </div>
  </div>

  <!-- メール送信確認モーダル -->
  <div id="emailModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="card-glass p-6 rounded-2xl w-full max-w-md mx-4">
      <h3 class="text-xl font-semibold text-white mb-4">メールを送信</h3>
      <p class="text-gray-300 mb-6">メールアプリを開いて recruit@dxpro-sol.com に問い合わせますか？</p>
      <div class="flex justify-end space-x-4">
        <button id="cancelEmail" class="px-4 py-2 rounded-xl bg-gray-600 text-white hover:bg-gray-700 transition-colors">キャンセル</button>
        <button id="confirmEmail" class="px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-colors">メールを送信</button>
      </div>
    </div>
  </div>

  <script>
    const alertBox = document.getElementById("alertBox");
    const params = new URLSearchParams(window.location.search);
    const video = document.getElementById('bgVideo');
    const videoToggle = document.getElementById('videoToggle');
    const dynamicBg = document.getElementById('dynamicBackground');
    const emailContact = document.getElementById('emailContact');
    const emailModal = document.getElementById('emailModal');
    const confirmEmail = document.getElementById('confirmEmail');
    const cancelEmail = document.getElementById('cancelEmail');

    // メールリンククリック処理
    emailContact.addEventListener('click', function(e) {
      e.preventDefault();
      emailModal.classList.remove('hidden');
    });

    // モーダル操作
    confirmEmail.addEventListener('click', function() {
      window.location.href = 'mailto:recruit@dxpro-sol.com?subject=ログインに関するお問い合わせ';
      emailModal.classList.add('hidden');
    });

    cancelEmail.addEventListener('click', function() {
      emailModal.classList.add('hidden');
    });

    // モーダル外クリックで閉じる
    emailModal.addEventListener('click', function(e) {
      if (e.target === emailModal) {
        emailModal.classList.add('hidden');
      }
    });

    // 동적 배경 요소 생성
    function createDynamicBackground() {
      const colors = [
        'rgba(16, 185, 129, 0.1)', 
        'rgba(14, 165, 233, 0.1)', 
        'rgba(139, 92, 246, 0.1)'
      ];
      
      for (let i = 0; i < 15; i++) {
        const element = document.createElement('div');
        element.classList.add('dynamic-bg-element');
        
        // 랜덤 크기와 위치
        const size = Math.random() * 200 + 50;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        
        element.style.width = `${size}px`;
        element.style.height = `${size}px`;
        element.style.left = `${posX}vw`;
        element.style.top = `${posY}vh`;
        element.style.background = colors[Math.floor(Math.random() * colors.length)];
        
        // 랜덤 애니메이션 지연
        element.style.animationDelay = `${Math.random() * 5}s`;
        element.style.animationDuration = `${15 + Math.random() * 10}s`;
        
        dynamicBg.appendChild(element);
      }
    }

    // 비디오 로드 상태 확인
    function checkVideoLoad() {
      return new Promise((resolve) => {
        // 비디오가 로드되었는지 확인
        if (video.readyState >= 3) { // HAVE_FUTURE_DATA
          video.classList.add('loaded');
          resolve(true);
        } else {
          // 비디오 로드 실패 시 대체 배경 표시
          document.querySelector('.video-fallback').style.zIndex = '-1';
          resolve(false);
        }
        
        // 타임아웃 설정
        setTimeout(() => {
          if (!video.classList.contains('loaded')) {
            document.querySelector('.video-fallback').style.zIndex = '-1';
            resolve(false);
          }
        }, 3000);
      });
    }

    function showAlert(message, type = "error") {
      alertBox.textContent = message;
      alertBox.className = "mb-4 p-4 rounded-xl font-medium text-white transition-all duration-500 transform";

      if(type === "success") {
        alertBox.classList.add("bg-gradient-to-r", "from-green-500", "to-emerald-600");
      } else if(type === "error") {
        alertBox.classList.add("bg-gradient-to-r", "from-red-400", "to-red-500");
      } else if(type === "info") {
        alertBox.classList.add("bg-gradient-to-r", "from-blue-400", "to-blue-500");
      }

      alertBox.classList.remove("hidden", "opacity-0", "scale-95");
      alertBox.classList.add("opacity-100", "scale-100");

      // 5秒後にフェードアウト
      setTimeout(() => {
        alertBox.classList.add("opacity-0", "scale-95");
        setTimeout(() => alertBox.classList.add("hidden"), 500);
      }, 5000);
    }

    if(params.get("msg") === "register_success") {
      showAlert("新規登録が完了しました。ログインしてください。", "success");
    }

    if(params.get("msg") === "logout_success") {
      showAlert("ログアウトしました。", "info");
    }

    if(params.get("msg") === "login_failed") {
      showAlert("ログインIDまたはパスワードが間違っています。", "error");
    }
    
    if(params.get("msg") === "session_expired") {
      showAlert("セッションの有効期限が切れました。再度ログインしてください。", "info");
    }
    
    if(params.get("msg") === "password_changed") {
      showAlert("パスワードの変更が完了しました。新しいパスワードでログインしてください。", "success");
    }

    // 비디오 로드 이벤트 리스너
    video.addEventListener('loadeddata', function() {
      video.classList.add('loaded');
    });

    video.addEventListener('error', function() {
      console.log('비디오 로딩에 실패했습니다. 대체 배경을 사용합니다.');
      document.querySelector('.video-fallback').style.zIndex = '-1';
    });

    // 동적 배경 생성
    createDynamicBackground();
    
    // 비디오 로드 확인
    window.addEventListener('load', function() {
      checkVideoLoad().then(success => {
        if (!success) {
          console.log('비디오 로드 실패로 대체 배경을 표시합니다.');
        }
      });
    });
  </script>
</body>
</html>