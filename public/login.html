<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ログイン - DXPRO SOLUTIONS</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-green-50 to-gray-50 min-h-screen flex items-center justify-center p-4">

  <div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-md">
    <h2 class="text-3xl font-bold text-green-700 text-center mb-6">ログイン</h2>

    <div id="alertBox" class="hidden mb-4 p-3 rounded-lg text-white font-medium"></div>

    <form action="/login" method="post" class="space-y-4">
      <input type="text" name="username" placeholder="ユーザー名" required
        class="w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-400">
      <input type="password" name="password" placeholder="パスワード" required
        class="w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-400">
      <button type="submit"
        class="w-full bg-green-600 text-white font-semibold py-3 rounded-lg hover:bg-green-700 transition">
        ログイン
      </button>
    </form>

    <p class="text-center mt-4 text-gray-600">
      新規登録は
      <a href="/register.html" class="text-green-600 hover:underline">こちら</a>
    </p>
  </div>

  <script>
    const alertBox = document.getElementById("alertBox");
    const params = new URLSearchParams(window.location.search);

    function showAlert(message, type = "error") {
      alertBox.textContent = message;
      alertBox.className = "mb-4 p-3 rounded-lg font-medium text-white transition-all";

      if(type === "success") {
        alertBox.classList.add("bg-green-500");
      } else if(type === "error") {
        alertBox.classList.add("bg-red-500");
      } else if(type === "info") {
        alertBox.classList.add("bg-blue-500");
      }

      alertBox.classList.remove("hidden");

      // 3秒後にフェードアウト
      setTimeout(() => {
        alertBox.classList.add("opacity-0");
        setTimeout(() => alertBox.classList.add("hidden"), 500);
      }, 3000);
    }

    if(params.get("msg") === "register_success") {
      showAlert("新規登録が完了しました。ログインしてください。", "success");
    }

    if(params.get("msg") === "logout_success") {
      showAlert("ログアウトしました。", "info");
    }

    if(params.get("msg") === "login_failed") {
      showAlert("ユーザー名またはパスワードが間違っています。", "error");
    }

  </script>
</body>
</html>
